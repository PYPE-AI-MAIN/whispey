---
title: Advanced Features
description: Advanced SDK features and capabilities
---

## Core Usage

Keep your integration simple and reliable. The primary flow is:

```python
# 1) Start a session
session_id = whispey.start_session(session)

# ... run your LiveKit agent ...

# 2) Export data when done
result = await whispey.export(session_id)
```

{/* Removed custom metrics to simplify SDK surface area in docs */}

## Session Metadata

Enrich your analytics with detailed session information.

### Basic Metadata

```python
session_id = whispey.start_session(
    session=your_livekit_session,
    phone_number="+1234567890",
    customer_name="John Doe",
    conversation_type="customer_support",
    metadata={
        "department": "technical_support",
        "priority": "high",
        "language": "en",
        "tags": ["escalation", "urgent"]
    }
)
```

### Advanced Metadata

```python
metadata = {
    # User information
    "user_id": "user_12345",
    "user_type": "premium",
    "account_tier": "enterprise",
    
    # Session context
    "session_type": "voice_call",
    "channel": "phone",
    "device_type": "mobile",
    
    # Business context
    "product": "mobile_app",
    "feature": "login_support",
    "campaign": "q4_2024_support",
    
    # Technical context
    "agent_version": "2.1.0",
    "model_config": "gpt-4o-mini",
    "region": "us-east-1",
    
    # Custom fields
    "custom_field_1": "value_1",
    "custom_field_2": "value_2"
}

session_id = whispey.start_session(
    session=your_livekit_session,
    metadata=metadata
)
```

{/* Removed real-time metric/event examples to avoid complexity */}

## Multi-Agent Support

Track and compare performance across multiple agents.

### Agent Comparison

```python
# Initialize multiple agents and compare basic outcomes
agents = {
    "support_agent": LivekitObserve(agent_id="support-001"),
    "sales_agent": LivekitObserve(agent_id="sales-001"),
    "billing_agent": LivekitObserve(agent_id="billing-001")
}

for agent_name, agent in agents.items():
    session_id = agent.start_session(session=your_livekit_session)
    # ... run conversation ...
    await agent.export(session_id)
```

{/* Removed event-based performance analysis */}

## Integration Hooks

Connect Whispey with your existing systems and workflows.

### Custom Analytics Integration

```python
# Hook into custom analytics systems
def custom_analytics_handler(event_data):
    # Send to your analytics platform
    analytics_api.send_event(event_data)

# Register custom handlers
whispey.register_event_handler("session_started", custom_analytics_handler)
whispey.register_event_handler("session_ended", custom_analytics_handler)
```

### Webhook Integration

```python
# Configure webhooks for real-time notifications
whispey.configure_webhooks({
    "session_started": "https://your-api.com/webhooks/session-start",
    "session_ended": "https://your-api.com/webhooks/session-end",
    "bug_reported": "https://your-api.com/webhooks/bug-report",
    "cost_threshold": "https://your-api.com/webhooks/cost-alert"
})
```

### Database Integration

```python
# Store analytics data in your database
def database_handler(session_data):
    db.analytics.insert_one({
        "session_id": session_data["session_id"],
        "metrics": session_data["metrics"],
        "events": session_data["events"],
        "timestamp": datetime.now()
    })

whispey.register_data_handler(database_handler)
```

## Error Handling and Recovery

Robust error handling for production environments.

### Graceful Degradation

```python
# Configure error handling
whispey = LivekitObserve(
    agent_id="your-agent-id",
    api_key="your-api-key",
    error_handling={
        "retry_attempts": 3,
        "retry_delay": 1.0,
        "graceful_degradation": True,
        "fallback_mode": "local_logging"
    }
)
```

### Custom Error Handlers

```python
def custom_error_handler(error):
    # Log error to your system
    logger.error(f"Whispey error: {error}")
    
    # Send alert to your team
    alert_system.send_alert(f"Analytics error: {error}")
    
    # Continue with fallback
    return {"status": "fallback", "message": "Using local logging"}

whispey.register_error_handler(custom_error_handler)
```

## Performance Optimization

Optimize your analytics for high-performance applications.

### Batch Processing

```python
# Enable batch processing for high-volume scenarios
whispey = LivekitObserve(
    agent_id="your-agent-id",
    api_key="your-api-key",
    batch_processing={
        "enabled": True,
        "batch_size": 100,
        "flush_interval": 30,  # seconds
        "max_queue_size": 1000
    }
)
```

### Caching

```python
# Enable caching for frequently accessed data
whispey = LivekitObserve(
    agent_id="your-agent-id",
    api_key="your-api-key",
    caching={
        "enabled": True,
        "cache_ttl": 3600,  # 1 hour
        "cache_size": 1000
    }
)
```

### Compression

```python
# Enable data compression for network efficiency
whispey = LivekitObserve(
    agent_id="your-agent-id",
    api_key="your-api-key",
    compression={
        "enabled": True,
        "algorithm": "gzip",
        "min_size": 1024  # bytes
    }
)
```
